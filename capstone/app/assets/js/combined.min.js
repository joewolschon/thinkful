var app=angular.module("app",["ngProgress"]);app.config(function(){SC.initialize({client_id:"2553d3948bd996a6f522c024161d134b",redirect_uri:"http://example.com/callback.html"})}),angular.module("app").directive("currentTrack",function(player,ngProgress,$log){return{restrict:"E",scope:!0,templateUrl:"assets/partials/currentTrack.html",controller:function($scope){$scope.percent=0,ngProgress.color("#800080"),ngProgress.height("10px");var whilePlaying=function(){var newPercent=Math.round(this.position/$scope.track.duration*100);$log.log(this),newPercent!==$scope.percent&&($scope.percent=newPercent,ngProgress.set($scope.percent))};$scope.play=function(){$log.log("play"),player.start(whilePlaying)},$scope.stop=function(){player.stop()}},link:function(scope){scope.$watch(player.getCurrentTrack_,function(track){$log.log(track),scope.track=track}),scope.$watch(player.getCurrentPosition_,function(currentPosition){$log.log("newposi"),scope.currentPosition=currentPosition})}}}),angular.module("app").directive("playlist",function(player,$log){return{restrict:"E",scope:!0,templateUrl:"assets/partials/playlist.html",controller:function($scope){$scope.play=function(streamUrl){SC.stream(streamUrl,function(test){$log.log(test)})}},link:function(scope){scope.$watch(player.getTracks_,function(tracks){$log.log(tracks),scope.tracks=tracks})}}}),angular.module("app").service("player",function($rootScope,$timeout,$log){var tracks=null,currentTrack=null,soundManager=null,currentPosition=null,onPlay=function(){$log.log("play12")},onFinish=function(){$log.log("finish"),playNext()},onStop=function(){$log.log("stop")},options={onplay:onPlay,onfinish:onFinish,onstop:onStop,usePeakData:!0,useWaveformData:!0,useEQData:!0};SC.get("/tracks",function(trackData){tracks=trackData,$log.log(tracks),$rootScope.$apply()}),this.start=function(whilePlaying){this.stop(),options.whileplaying=whilePlaying,playNext()};var playNext=function(){currentTrack=tracks[0],tracks=tracks.slice(1,tracks.length-1),SC.stream(currentTrack.stream_url,options,function(soundManagerObj){$log.log("test",soundManagerObj),soundManager=soundManagerObj,soundManager.play()},function(shit){$log.log(shit)})};this.stop=function(){soundManager&&soundManager.stop()},this.pause=function(){},this.getCurrentTrack_=function(){return currentTrack},this.getTracks_=function(){return tracks},this.onStreaming=function(){},this.getCurrentPosition_=function(){return currentPosition}}),angular.module("app").service("soundcloud",function(){});
//# sourceMappingURL=combined.min.js.map